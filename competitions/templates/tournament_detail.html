{% extends 'layout.html' %}
{% load static %}

{% block title %}
    Tournament detail
{% endblock %}
{% block main %}

{% verbatim %}

<div id="tournament_detail">
    <div class="card container card-tour-detail">
        <div class="card-header">
            <h2 class="card-title"><i class="fas fa-trophy icon"></i>Name -- {{ tournament.name }}</h2>
        </div>
        <ul class="list-group list-group-flush">
            <li class="list-group-item"><i class="fas fa-map-marker-alt icon"></i>{{ tournament.place }}</li>
            <li v-if="tournament.description" class="list-group-item"><i class="fas fa-info-circle icon"></i>{{ tournament.description }}</li>
            <li class="list-group-item"><i class="fas fa-users icon"></i>{{ tournament.capacity }}</li>
            <li class="list-group-item">
                <i class="fas fa-calendar-alt icon"></i>
                {{ formatDateTime(tournament.date_of_start) }} - {{ formatDateTime(tournament.date_of_end) }}
            </li>
            <li class="list-group-item">
                <i class="fas fa-crown icon"></i>
                <span>
                    {{ organizers.map(organizer => organizer.full_name).join(', ') }}
                </span>
            </li>
        </ul>
    </div>

<table class="table container">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Name</th>
            <th scope="col">Date of birth</th>
            <th v-if="innerWidth >= 992">Email</th>  <th v-else class="d-none"></th>
            <th scope="col">Country</th>
            <th scope="col">Rating</th>
        </tr>
    </thead>
    <tbody>
        <tr v-for="(player, index) in players">
            <th>{{ index + 1 }}</th>
            <td>
                <a class="nav-link active" :href="`/profile/${player.unique_id}/`">{{ player.full_name }}</a>
            </td>
            <td>{{ player.date_of_birth }}</td>
            <td v-if="innerWidth >= 992">{{ player.email }}</td> <td v-else class="d-none"></td>
            <td>{{ player.country }}</td>
            <td>{{ player.rating }}</td>
        </tr>
    </tbody>
</table>
</div>

{% endverbatim %}

{% if request.user.is_authenticated and opened %}
    <form method="post" action="">
        {% csrf_token %}
        <button class="btn btn-success" type="submit" name="register">Register</button>
        <button class="btn btn-danger" type="submit" name="unregister">Unregister</button>
        {% if organizer %}
            <button class="btn btn-success" type="submit" name="start">Start</button>
            <button class="btn btn-info" type="submit" name="edit">Edit</button>
            <button class="btn btn-danger" type="submit" name="remove">Remove</button>
        {% endif %}
    </form>
{% endif %}

<script src="/static/scripts/tournament_detail.js"></script>

{% endblock %}